<!DOCTYPE html>
<html>
<head>
    <title>Kirim ID Perangkat</title>
    <style>
        body { font-family: sans-serif; text-align: center; margin-top: 50px; }
        #deviceIdInput { width: 300px; padding: 10px; }
        #submitButton { padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Verifikasi Perangkat</h1>
    <p>ID perangkat Anda akan dikirim untuk persetujuan.</p>
    <input type="text" id="deviceIdInput" readonly />
    <button id="submitButton">Kirim untuk Verifikasi</button>
    <p id="statusMessage"></p>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const deviceId = urlParams.get('deviceId');
        const deviceIdInput = document.getElementById('deviceIdInput');
        const submitButton = document.getElementById('submitButton');
        const statusMessage = document.getElementById('statusMessage');

        if (deviceId) {
            deviceIdInput.value = deviceId;
        }

        submitButton.addEventListener('click', async () => {
            const endpointUrl = 'URL_FIREBASE_FUNCTIONS_ANDA'; // Ganti dengan URL Functions Anda
            const response = await fetch(endpointUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ deviceId: deviceIdInput.value }),
            });
            const result = await response.json();
            if (result.success) {
                statusMessage.textContent = 'ID berhasil dikirim! Mohon tunggu konfirmasi dari admin.';
                submitButton.disabled = true;
            } else {
                statusMessage.textContent = 'Gagal mengirim ID. Silakan coba lagi.';
            }
        });
    </script>
</body>
</html>
